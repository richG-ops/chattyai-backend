"use strict";(()=>{var e={};e.id=932,e.ids=[932],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},40404:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>x,patchFetch:()=>b,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>y,staticGenerationAsyncStorage:()=>h});var r={};t.r(r),t.d(r,{GET:()=>l,POST:()=>c});var n=t(49303),a=t(88716),i=t(60670),o=t(87070),u=t(41482),p=t.n(u);async function c(e){try{let{email:s,password:t}=await e.json();if(!s)return o.NextResponse.json({error:"Email is required"},{status:400});if("demo@business.com"===s){let e=process.env.JWT_SECRET||"your-secret-key",s={id:"demo-client",email:"demo@business.com",businessName:"Demo Business",ownerName:"Demo Owner",businessType:"salon",apiKey:"demo-api-key"},t=p().sign({client_id:s.id,email:s.email,business_name:s.businessName,api_key:s.apiKey},e,{expiresIn:"7d"});return o.NextResponse.json({success:!0,token:t,client:s})}try{if(!(await fetch("http://localhost:4000/health",{method:"GET",headers:{"Content-Type":"application/json"}})).ok)throw Error("Backend not available");let e=process.env.JWT_SECRET||"your-secret-key",t=`client_${Date.now()}`,r=p().sign({client_id:t,email:s,business_name:"User Business",api_key:`api_${Date.now()}`},e,{expiresIn:"7d"});return o.NextResponse.json({success:!0,token:r,client:{id:t,email:s,businessName:"User Business",ownerName:"User",businessType:"service"}})}catch(e){return console.warn("Backend not available, using demo mode:",e),o.NextResponse.json({error:"Backend not available. Please try the demo account: demo@business.com"},{status:503})}}catch(e){return console.error("Auth error:",e),o.NextResponse.json({error:"Authentication failed"},{status:500})}}async function l(e){try{let s=e.headers.get("authorization");if(!s||!s.startsWith("Bearer "))return o.NextResponse.json({error:"Missing authorization header"},{status:401});let t=s.split(" ")[1],r=process.env.JWT_SECRET||"your-secret-key",n=p().verify(t,r);return o.NextResponse.json({success:!0,client:{id:n.client_id,email:n.email,businessName:n.business_name,apiKey:n.api_key}})}catch(e){return o.NextResponse.json({error:"Invalid token"},{status:401})}}let d=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/route",pathname:"/api/auth",filename:"route",bundlePath:"app/api/auth/route"},resolvedPagePath:"C:\\Users\\RICHS\\OneDrive\\Desktop\\chattyai-calendar-bot\\thechattyai-frontend\\src\\app\\api\\auth\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:y}=d,x="/api/auth/route";function b(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:h})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,726,70],()=>t(40404));module.exports=r})();